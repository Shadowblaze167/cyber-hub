<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System_Genesis_v2</title>
    <style>
        :root { 
            --neon: #00ff41; 
            --urban: #00ccff; 
            --alert: #ff003c; 
            --glass: rgba(5, 10, 5, 0.92); 
            --font: 'JetBrains Mono', 'Courier New', monospace;
        }

        * { box-sizing: border-box; }
        body, html { margin: 0; padding: 0; height: 100vh; overflow: hidden; font-family: var(--font); background: #000; color: var(--neon); }

        /* --- SCANLINE EFFECT --- */
        body::before {
            content: " "; display: block; position: absolute; top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 1000; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        /* --- DECOY --- */
        #decoy { position: fixed; inset: 0; z-index: 100; background: #fff; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 1s ease-in-out; }
        #game-box { width: 640px; height: 160px; border-bottom: 2px solid #535353; position: relative; overflow: hidden; }
        #dino { width: 40px; height: 40px; background: #535353; position: absolute; bottom: 0; left: 50px; border-radius: 4px; }
        .cactus { width: 15px; height: 35px; background: #535353; position: absolute; bottom: 0; }

        /* --- LOGIN LAYER --- */
        #login-layer { position: fixed; inset: 0; z-index: 200; display: none; background: #000; opacity: 0; transition: 0.8s; }
        .auth-card { border: 1px solid var(--neon); padding: 50px; background: rgba(0,20,0,0.5); box-shadow: 0 0 50px rgba(0,255,65,0.2); border-radius: 8px; animation: flicker 2s infinite; }
        @keyframes flicker { 0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { opacity: 1; } 20%, 24%, 55% { opacity: 0.5; } }
        input[type="password"] { background: transparent; border: none; border-bottom: 2px solid var(--neon); color: #fff; font-size: 2rem; text-align: center; outline: none; width: 300px; margin-top: 20px; }

        /* --- MAIN CONSOLE --- */
        #console { 
            position: fixed; inset: 0; z-index: 300; display: none; 
            grid-template-columns: 320px 1fr 300px; grid-template-rows: 60px 1fr 280px; gap: 10px; 
            background: radial-gradient(circle, #0a0a0a 0%, #000 100%); padding: 10px;
        }
        
        .panel { 
            background: var(--glass); border: 1px solid rgba(255,255,255,0.1); 
            border-radius: 4px; display: flex; flex-direction: column; overflow: hidden;
            opacity: 0; transform: scale(0.95); transition: 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.5);
        }
        .panel.active { opacity: 1; transform: scale(1); }
        .p-hdr { padding: 12px; font-size: 10px; background: rgba(255,255,255,0.05); border-bottom: 1px solid rgba(255,255,255,0.1); letter-spacing: 2px; text-transform: uppercase; }

        /* --- NEURAL CHAT --- */
        #ai-chat { flex-grow: 1; padding: 15px; font-size: 11px; overflow-y: auto; scrollbar-width: none; background: rgba(0,0,0,0.3); }
        #ai-input { background: rgba(255,255,255,0.03); border: none; border-top: 1px solid rgba(255,255,255,0.1); color: #fff; padding: 15px; width: 100%; outline: none; }

        /* --- TERMINAL --- */
        #term { flex-grow: 1; padding: 15px; font-size: 11px; overflow-y: auto; color: var(--neon); }
        .feat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; padding: 15px; }
        .btn { 
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); 
            color: #aaa; padding: 10px; font-size: 10px; cursor: pointer; transition: 0.3s;
        }
        .btn:hover { background: var(--neon); color: #000; box-shadow: 0 0 15px var(--neon); }

        /* --- FX ELEMENTS --- */
        #shockwave { position: fixed; top: 50%; left: 50%; width: 1px; height: 1px; border: 2px solid var(--neon); border-radius: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 250; opacity: 0; }
        @keyframes shock { 0% { width: 0; height: 0; opacity: 1; border-width: 20px; } 100% { width: 250vw; height: 250vw; opacity: 0; border-width: 1px; } }
        .m-canvas { position: absolute; inset: 0; z-index: 1; opacity: 0.2; pointer-events: none; }
    </style>
</head>
<body onkeydown="handleInput(event)">

    <div id="shockwave"></div>

    <div id="decoy">
        <div id="score" style="font-size: 40px; color: #535353; font-weight: bold;">00000</div>
        <div id="game-box"><div id="dino"></div></div>
        <p style="color: #999; margin-top: 20px;">[Space] to jump</p>
    </div>

    <div id="login-layer">
        <canvas id="login-matrix" class="m-canvas"></canvas>
        <div style="height: 100vh; display: flex; align-items: center; justify-content: center;">
            <div class="auth-card">
                <div style="letter-spacing: 5px; font-size: 12px;">ENCRYPTED_CHANNEL</div>
                <input type="password" id="passkey" placeholder="PASSKEY" onkeypress="if(event.key==='Enter') auth()">
            </div>
        </div>
    </div>

    <div id="console">
        <header style="grid-column: 1/-1; display: flex; align-items: center; padding: 0 20px; background: #000; border: 1px solid rgba(255,255,255,0.1);">
            <div style="color: var(--neon); font-weight: bold;">OMNI_X // HYPER_DRIVE</div>
            <div style="margin-left: auto; font-size: 12px; color: #666;" id="clock">00:00:00</div>
        </header>

        <aside class="panel" id="p1" style="grid-row: 2/4;">
            <div class="p-hdr">Core_Systems</div>
            <div class="feat-grid" id="f-grid"></div>
        </aside>

        <main class="panel" id="p2">
            <div class="p-hdr">Live_Kernel_Log</div>
            <div id="term"></div>
        </main>

        <aside class="panel" id="p3" style="grid-row: 2/3;">
            <div class="p-hdr">Titan_Vault</div>
            <div id="vault-list" style="padding: 15px; font-size: 10px;"></div>
            <button class="btn" style="margin: 10px;" onclick="document.getElementById('f-up').click()">+ UPLOAD</button>
            <input type="file" id="f-up" style="display:none" onchange="upload(this)">
        </aside>

        <aside class="panel" id="p4" style="grid-column: 2/4;">
            <div class="p-hdr">Neural_Architect_Gemini</div>
            <div id="ai-chat"></div>
            <input type="text" id="ai-input" placeholder="Request UI morph..." onkeypress="if(event.key==='Enter') askAI()">
        </aside>
    </div>

<script type="module">
    import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

    const API_KEY = "AIzaSyDjahWfc3S0D8nKVZB5XFrmE84a0RM3eGs";
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ 
        model: "gemini-1.5-flash-latest",
        systemInstruction: "You are Hyperion AI. When asked to change the UI/theme, output ONLY a JSON object: {\"neon\":\"HEX\",\"urban\":\"HEX\",\"alert\":\"HEX\",\"glass\":\"RGBA\"}. No text if JSON is present."
    });

    window.askAI = async function() {
        const input = document.getElementById('ai-input');
        const chat = document.getElementById('ai-chat');
        const msg = input.value; if(!msg) return;

        chat.innerHTML += `<div style="color:var(--urban); margin-bottom:10px;">> USER: ${msg}</div>`;
        input.value = "";
        const aiMsg = document.createElement('div');
        aiMsg.innerHTML = "> AI: Processing...";
        chat.appendChild(aiMsg);

        try {
            const result = await model.generateContent(msg);
            const text = result.response.text();
            const json = text.match(/\{.*?\}/s);

            if(json) {
                const colors = JSON.parse(json[0]);
                Object.keys(colors).forEach(k => document.documentElement.style.setProperty(`--${k}`, colors[k]));
                aiMsg.innerHTML = "> AI: System aesthetic recalibrated.";
                document.body.style.filter = "brightness(2) saturate(2)";
                setTimeout(() => document.body.style.filter = "none", 200);
            } else {
                aiMsg.innerHTML = `> AI: ${text}`;
            }
        } catch(e) { aiMsg.innerHTML = "> AI: LINK_ERR"; }
        chat.scrollTop = chat.scrollHeight;
    }
</script>

<script>
    let code = "", score = 0, active = true, db;
    const tools = ["Packet_Sniff", "Hash_Decipher", "SQL_Inject", "DDoS_Node", "Proxy_Chain", "DNS_Bypass", "Root_Shell", "Ghost_Route"];

    // Setup Storage
    const req = indexedDB.open("TitanV2", 1);
    req.onupgradeneeded = e => e.target.result.createObjectStore("files", {keyPath:"id", autoIncrement:true});
    req.onsuccess = e => db = e.target.result;

    function handleInput(e) {
        if(e.code === "Space") jump();
        code += e.key.toLowerCase();
        if(code.includes("root")) { code = ""; startTransition(); }
    }

    function jump() {
        const d = document.getElementById('dino');
        if(d.classList.contains('jump')) return;
        d.animate([{bottom: '0'}, {bottom: '100px'}, {bottom: '0'}], {duration: 500, easing: 'ease-out'});
    }

    function startTransition() {
        active = false;
        document.getElementById('decoy').style.transform = "translateY(-100vh)";
        document.getElementById('login-layer').style.display = 'block';
        setTimeout(() => document.getElementById('login-layer').style.opacity = '1', 100);
        drawMatrix('login-matrix');
        document.getElementById('passkey').focus();
    }

    function auth() {
        if(document.getElementById('passkey').value === "99") {
            document.getElementById('shockwave').style.animation = "shock 0.8s forwards";
            setTimeout(() => {
                document.getElementById('login-layer').style.display = 'none';
                document.getElementById('console').style.display = 'grid';
                initConsole();
            }, 500);
        }
    }

    function initConsole() {
        tools.forEach((t, i) => {
            const b = document.createElement('button');
            b.className = 'btn'; b.innerText = t;
            b.onclick = () => log(`Executing operation: ${t}... DONE.`);
            document.getElementById('f-grid').appendChild(b);
        });
        
        ['p1','p2','p3','p4'].forEach((p, i) => {
            setTimeout(() => document.getElementById(p).classList.add('active'), i * 150);
        });

        setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
        log("System Genesis v2.0 Initialized...");
        log("Neural Link: Standby.");
    }

    function log(m) {
        const t = document.getElementById('term');
        t.innerHTML += `<div>[${new Date().toLocaleTimeString()}] ${m}</div>`;
        t.scrollTop = t.scrollHeight;
    }

    function upload(input) {
        const f = input.files[0];
        const reader = new FileReader();
        reader.onload = e => {
            const tx = db.transaction("files", "readwrite");
            tx.objectStore("files").add({name: f.name, data: e.target.result});
            tx.oncomplete = () => {
                log(`File ${f.name} stored in Titan Vault.`);
                updateVault();
            };
        };
        reader.readAsDataURL(f);
    }

    function updateVault() {
        const v = document.getElementById('vault-list'); v.innerHTML = "";
        db.transaction("files").objectStore("files").openCursor().onsuccess = e => {
            const c = e.target.result;
            if(c) {
                v.innerHTML += `<div style="margin-bottom:5px;">ðŸ“‚ ${c.value.name}</div>`;
                c.continue();
            }
        };
    }

    function drawMatrix(id) {
        const c = document.getElementById(id); const ctx = c.getContext('2d');
        c.width = window.innerWidth; c.height = window.innerHeight;
        const columns = Array(Math.floor(c.width/20)).fill(1);
        setInterval(() => {
            ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,c.width,c.height);
            ctx.fillStyle = "#0f0";
            columns.forEach((y, i) => {
                ctx.fillText(Math.floor(Math.random()*2), i*20, y*20);
                if(y*20 > c.height && Math.random() > 0.975) columns[i] = 0;
                columns[i]++;
            });
        }, 50);
    }
</script>
</body>
</html>
